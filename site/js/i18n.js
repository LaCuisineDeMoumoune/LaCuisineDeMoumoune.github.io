!function(){function n(e){if(n.strings){var s=n.strings[e];return s||(DEBUG?(console.warn("missing key: "+e),n.missingKeys[e]=!0,e):e.split(".").pop())}}function e(s,a){for(var o in s){var g=s[o],i=a?a+"."+o:o;"object"==typeof g?e(g,i):n.strings[i]=g}}window.i18n=n,n.missingKeys={},n.n=function(e,s){return n(0==s?e+".0":1==s?e+".1":e+".n").replace("#",s)},n.strings={},n.language=null,n.loadingLanguage=null,n.allLanguages=["fr","th"],n.setLanguage=function(s){s!=n.language&&(n.allLanguages.indexOf(s)<0?m.route.set("/fr/home"):s!=n.loadingLanguage&&(n.loadingLanguage=s,m.request({method:"GET",url:"i18n/"+s+".json"}).then(function(a){n.strings={},n.language=s,n.loadingLanguage=null,e(a),console.log("loaded strings for",s,n.strings)}).catch(function(e){console.log(e),n.loadingLanguage=null,m.route.set("/fr/home")})))},DEBUG&&(n.logMissingKeys=function(){var e={};_.each(n.missingKeys,function(n,s){var a=s,o="",g=s.lastIndexOf(".");g>=0&&(a=s.slice(g+1),o=s.slice(0,g)),e[o]||(e[o]=[]),e[o].push(a)}),_.keys(e).length>0&&(console.warn("Il manque des traductions pour "+n.language+" :"),_.each(e,function(n,e){console.warn('Dans "'+e+'"');var s=[];_.each(n,function(n){s.push('"'+n+'": "'+n+'",')}),console.log(s.join("\n")+"\n")}))})}();