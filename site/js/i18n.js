!function(){function n(s){if(n.strings){var a=n.strings[s];return a||(DEBUG?(console.warn("missing key: "+s),n.missingKeys[s]=!0,s):s.split(".").pop())}}function s(a,e){for(var o in a){var g=a[o],i=e?e+"."+o:o;"object"==typeof g?s(g,i):n.strings[i]=g}}window.i18n=n,n.missingKeys={},n.strings={},n.language=null,n.loadingLanguage=null,n.allLanguages=["fr","th"],n.setLanguage=function(a){a!=n.language&&(n.allLanguages.indexOf(a)<0?m.route.set("/fr/home"):a!=n.loadingLanguage&&(n.loadingLanguage=a,m.request({method:"GET",url:"i18n/"+a+".json"}).then(function(e){n.strings={},n.language=a,n.loadingLanguage=null,s(e),console.log("loaded strings for",a,n.strings)}).catch(function(s){console.log(s),n.loadingLanguage=null,m.route.set("/fr/home")})))},DEBUG&&(n.logMissingKeys=function(){var s={};_.each(n.missingKeys,function(n,a){var e=a,o="",g=a.lastIndexOf(".");g>=0&&(e=a.slice(g+1),o=a.slice(0,g)),s[o]||(s[o]=[]),s[o].push(e)}),_.keys(s).length>0&&(console.warn("Il manque des traductions pour "+n.language+" :"),_.each(s,function(n,s){console.warn('Dans "'+s+'"');var a=[];_.each(n,function(n){a.push('"'+n+'": "'+n+'",')}),console.log(a.join("\n")+"\n")}))})}();