mc.Recette={oninit:function(e){this.recette=_.find(mc.recettes,{nom:e.attrs.nom})},view:function(e){var t=this;return m("div#body.recette",[m(mc.Recette.FicheRecette,{parent:t}),m(mc.Pub)])}},mc.Recette.FicheRecette={oninit:function(e){var t=this;t.parent=e.attrs.parent,t.recette=t.parent.recette,t.motsTitre=_.map(t.recette.nomTraduit.split(" "),function(e){return e.length>=3?m("span.mot-decore",e+" "):m("span",e+" ")}),t.path="data/recettes/"+t.recette.nom+"/",m.request({method:"GET",url:t.path+t.recette.nom+"_"+i18n.language+".json"}).then(function(e){t.data=e,_.each(t.data.etapes,function(e){_.isArray(e.texte)&&(e.texte=e.texte.join(""))})}).catch(function(e){console.log(e)})},view:function(e){var t=this;return m("#fiche-recette.box",[m(mc.NomDecore,{nom:t.recette.nomTraduit,selector:"h1"}),m("div#info",[m("span.label",i18n("preparation")),m("span.value",i18n("_preparations."+t.recette.preparation)),m("span.label",i18n("origine")),m("span.value",i18n("_origines."+t.recette.origine)),m("span.label",i18n("prix")),m("span.value",i18n("_prix."+t.recette.prix)),m("span.label",i18n("difficulte")),m("span.value",i18n("_difficulte."+t.recette.difficulte))]),m("#top",[m(mc.CoverImage,{selector:"#photo",path:t.path+"/"+t.recette.nom+".md.jpg"}),m(mc.Recette.IngredientList,{parent:t})]),m("#etapes",i18n("preparation")),m(mc.Recette.EtapeList,{parent:t})])}},mc.Recette.IngredientList={oninit:function(e){var t=this,n=e.attrs.parent;t.recette=n.recette,t.pourNombrePersonnes=i18n("pourNombrePersonnes"),t.pourNombrePersonnes=t.pourNombrePersonnes.replace("#",t.recette.nombrePersonnes)},view:function(e){var t=this;return m("#ingredients",[m("h2#ingredients-title",[m("span",i18n("ingredients")),m("span.pour-nombre-personnes",t.pourNombrePersonnes)]),m("div#ingredient-list",_.map(t.recette.ingredients,function(e){return m("div.ingredient",[m(mc.IngredientLink,{ingredient:e.ingredient}),m("span.quantite",e.quantite),e.unite&&m("span.unite",e.unite.nomTraduit.length<=2?e.unite.nomTraduit:" "+e.unite.nomTraduit)])}))])}},mc.Recette.EtapeList={oninit:function(e){var t=this;t.parent=e.attrs.parent,t.recette=t.parent.recette,t.path=t.parent.path},view:function(e){var t=this;return t.data=t.parent.data,t.data?m("div",_.map(t.data.etapes,function(e,n){return m("div.etape",[m(mc.CoverImage,{selector:".photo",path:t.path+t.recette.nom+"_"+(n+1)+".sm.jpg"},[m(".index",n+1)]),m(".texte",e.texte)])})):m(mc.Spinner)}};