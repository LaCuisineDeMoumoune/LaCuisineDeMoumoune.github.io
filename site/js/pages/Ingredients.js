mc.Ingredients={oninit:function(){var e=this;e.search="",_.each(mc.tagsIngredient,function(n){n.selected=!1,n.setSelected=function(t){n.selected=t,e.filtrerList()}}),e.ingredientsFiltres=null,e.onSearchChange=function(n){e.search=n,e.filtrerList()},e.filtrerList=function(){if(e.search){var n=[],t=[];_.each(mc.ingredients,function(r){var i=r.nomTraduit.toLocaleLowerCase().indexOf(e.search);0===i?n.push(r):i>0&&t.push(r)}),e.ingredientsFiltres=n.concat(t)}else e.ingredientsFiltres=mc.ingredients;var r=0;_.each(mc.tagsIngredient,function(e){e.nombreIngredients=0,e.selected&&r++}),e.ingredientsFiltres=_.filter(e.ingredientsFiltres,function(e){var n=0;_.each(e.tags,function(e){e.selected&&n++});var t=n==r;return t&&_.each(e.tags,function(e){e.nombreIngredients++}),t})},e.filtrerList()},view:function(e){var n=this;return mc.ingredients?m("div#body.ingredients.pure-g",[m("div.pure-u-md-6-24.pure-u-1",[m("div#filtre.box",[m(".type","Filtrer par nom:"),m(mc.SearchInput,{callback:n.onSearchChange}),m(".type","Filtrer par cat√©gorie:"),m("div#tags",_.map(mc.tagsIngredient,function(e){return m("label",[m("input[type=checkbox]",{onchange:m.withAttr("checked",e.setSelected),checked:e.selected}),e.nomTraduit,m("span.nombre",e.nombreIngredients)])}))])]),m("div.pure-u-md-18-24.pure-u-1",[m("div#liste.pure-g",_.map(n.ingredientsFiltres,function(e){var n=e.recettes.length<=0?"muted":"";return m(mc.IngredientLink,{key:e._key,ingredient:e,className:"pure-u-md-8-24 pure-u-1 "+n})}))])]):m(mc.Spinner)}};