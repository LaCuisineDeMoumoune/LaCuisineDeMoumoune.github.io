!function(){function e(e,t,n,r,o,i){return{tag:e,key:t,attrs:n,children:r,text:o,dom:i,domSize:void 0,state:void 0,_state:void 0,events:void 0,instance:void 0,skip:!1}}function t(t){var n,l=arguments[1],a=2;if(null==t||"string"!=typeof t&&"function"!=typeof t&&"function"!=typeof t.view)throw Error("The selector must be either a string or a component.");if("string"==typeof t){var u;if(!(u=o[t])){n="div";for(var s=[],c={};u=r.exec(t);){var f=u[1],d=u[2];""===f&&""!==d?n=d:"#"===f?c.id=d:"."===f?s.push(d):"["===u[3][0]&&((f=u[6])&&(f=f.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===u[4]?s.push(f):c[u[4]]=f||!0)}0<s.length&&(c.className=s.join(" ")),u=o[t]={tag:n,attrs:c}}}if(null==l?l={}:("object"!=typeof l||null!=l.tag||Array.isArray(l))&&(l={},a=1),arguments.length===a+1)n=arguments[a],Array.isArray(n)||(n=[n]);else for(n=[];a<arguments.length;)n.push(arguments[a++]);if(a=e.normalizeChildren(n),"string"==typeof t){n=!1;var h,v,p,s=l.className||l.class;for(p in u.attrs)i.call(u.attrs,p)&&(l[p]=u.attrs[p]);void 0!==s&&(void 0!==l.class&&(l.class=void 0,l.className=s),null!=u.attrs.className&&(l.className=u.attrs.className+" "+s));for(p in l)if(i.call(l,p)&&"key"!==p){n=!0;break}return Array.isArray(a)&&1===a.length&&null!=a[0]&&"#"===a[0].tag?v=a[0].children:h=a,e(u.tag,l.key,n?l:void 0,h,v)}return e(t,l.key,l,a)}function n(e){var t=0,n=null,r="function"==typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var o=Date.now();0===t||16<=o-t?(t=o,e()):null===n&&(n=r(function(){n=null,e(),t=Date.now()},16-(o-t)))}}e.normalize=function(t){return Array.isArray(t)?e("[",void 0,void 0,e.normalizeChildren(t),void 0,void 0):null!=t&&"object"!=typeof t?e("#",void 0,void 0,!1===t?"":t,void 0,void 0):t},e.normalizeChildren=function(t){for(var n=0;n<t.length;n++)t[n]=e.normalize(t[n]);return t};var r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,o={},i={}.hasOwnProperty;t.trust=function(t){return null==t&&(t=""),e("<",void 0,void 0,t,void 0,void 0)},t.fragment=function(t,n){return e("[",t.key,t,e.normalizeChildren(n),void 0,void 0)};var l=function(e){function t(e,t){return function l(a){var f;try{if(!t||null==a||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof(f=a.then))c(function(){t||0!==e.length||console.error("Possible unhandled promise rejection:",a);for(var n=0;n<e.length;n++)e[n](a);o.length=0,i.length=0,s.state=t,s.retry=function(){l(a)}});else{if(a===r)throw new TypeError("Promise can't be resolved w/ itself");n(f.bind(a))}}catch(e){u(e)}}}function n(e){function t(e){return function(t){0<n++||e(t)}}var n=0,r=t(u);try{e(t(a),r)}catch(e){r(e)}}if(!(this instanceof l))throw Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var r=this,o=[],i=[],a=t(o,!0),u=t(i,!1),s=r._instance={resolvers:o,rejectors:i},c="function"==typeof setImmediate?setImmediate:setTimeout;n(e)};l.prototype.then=function(e,t){function n(e,t,n,l){t.push(function(t){if("function"!=typeof e)n(t);else try{r(e(t))}catch(e){o&&o(e)}}),"function"==typeof i.retry&&l===i.state&&i.retry()}var r,o,i=this._instance,a=new l(function(e,t){r=e,o=t});return n(e,i.resolvers,r,!0),n(t,i.rejectors,o,!1),a},l.prototype.catch=function(e){return this.then(null,e)},l.resolve=function(e){return e instanceof l?e:new l(function(t){t(e)})},l.reject=function(e){return new l(function(t,n){n(e)})},l.all=function(e){return new l(function(t,n){var r=e.length,o=0,i=[];if(0===e.length)t([]);else for(var l=0;l<e.length;l++)!function(l){function a(e){o++,i[l]=e,o===r&&t(i)}null==e[l]||"object"!=typeof e[l]&&"function"!=typeof e[l]||"function"!=typeof e[l].then?a(e[l]):e[l].then(a,n)}(l)})},l.race=function(e){return new l(function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)})},"undefined"!=typeof window?(void 0===window.Promise&&(window.Promise=l),l=window.Promise):"undefined"!=typeof global&&(void 0===global.Promise&&(global.Promise=l),l=global.Promise);var a=function(e){function t(e,n){if(Array.isArray(n))for(var o=0;o<n.length;o++)t(e+"["+o+"]",n[o]);else if("[object Object]"===Object.prototype.toString.call(n))for(o in n)t(e+"["+o+"]",n[o]);else r.push(encodeURIComponent(e)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}if("[object Object]"!==Object.prototype.toString.call(e))return"";var n,r=[];for(n in e)t(n,e[n]);return r.join("&")},u=/^file:\/\//i,s=function(e,t){function n(){function e(){0==--t&&"function"==typeof f&&f()}var t=0;return function n(r){var o=r.then;return r.then=function(){t++;var i=o.apply(r,arguments);return i.then(e,function(n){if(e(),0===t)throw n}),n(i)},r}}function r(e,t){if("string"==typeof e){var n=e;null==(e=t||{}).url&&(e.url=n)}return e}function o(e,t){if(null==t)return e;for(var n=e.match(/:[^\/]+/gi)||[],r=0;r<n.length;r++){var o=n[r].slice(1);null!=t[o]&&(e=e.replace(n[r],t[o]))}return e}function i(e,t){var n=a(t);return""!==n&&(e+=(0>e.indexOf("?")?"?":"&")+n),e}function l(e){try{return""!==e?JSON.parse(e):null}catch(t){throw Error(e)}}function s(e){return e.responseText}function c(e,t){if("function"==typeof e){if(!Array.isArray(t))return new e(t);for(var n=0;n<t.length;n++)t[n]=new e(t[n])}return t}var f,d=0;return{request:function(a,f){var d=n();a=r(a,f);var h=new t(function(t,n){null==a.method&&(a.method="GET"),a.method=a.method.toUpperCase();var r="GET"!==a.method&&"TRACE"!==a.method&&("boolean"!=typeof a.useBody||a.useBody);"function"!=typeof a.serialize&&(a.serialize="undefined"!=typeof FormData&&a.data instanceof FormData?function(e){return e}:JSON.stringify),"function"!=typeof a.deserialize&&(a.deserialize=l),"function"!=typeof a.extract&&(a.extract=s),a.url=o(a.url,a.data),r?a.data=a.serialize(a.data):a.url=i(a.url,a.data);var f=new e.XMLHttpRequest,d=!1,h=f.abort;f.abort=function(){d=!0,h.call(f)},f.open(a.method,a.url,"boolean"!=typeof a.async||a.async,"string"==typeof a.user?a.user:void 0,"string"==typeof a.password?a.password:void 0),a.serialize===JSON.stringify&&r&&f.setRequestHeader("Content-Type","application/json; charset=utf-8"),a.deserialize===l&&f.setRequestHeader("Accept","application/json, text/*"),a.withCredentials&&(f.withCredentials=a.withCredentials);for(var v in a.headers)({}).hasOwnProperty.call(a.headers,v)&&f.setRequestHeader(v,a.headers[v]);"function"==typeof a.config&&(f=a.config(f,a)||f),f.onreadystatechange=function(){if(!d&&4===f.readyState)try{var e=a.extract!==s?a.extract(f,a):a.deserialize(a.extract(f,a));if(200<=f.status&&300>f.status||304===f.status||u.test(a.url))t(c(a.type,e));else{var r,o=Error(f.responseText);for(r in e)o[r]=e[r];n(o)}}catch(e){n(e)}},r&&null!=a.data?f.send(a.data):f.send()});return!0===a.background?h:d(h)},jsonp:function(l,a){var u=n();l=r(l,a);var s=new t(function(t,n){var r=l.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+d++,a=e.document.createElement("script");e[r]=function(n){a.parentNode.removeChild(a),t(c(l.type,n)),delete e[r]},a.onerror=function(){a.parentNode.removeChild(a),n(Error("JSONP request failed")),delete e[r]},null==l.data&&(l.data={}),l.url=o(l.url,l.data),l.data[l.callbackKey||"callback"]=r,a.src=i(l.url,l.data),e.document.documentElement.appendChild(a)});return!0===l.background?s:u(s)},setCompletionCallback:function(e){f=e}}}(window,l),c=function(t){function n(e,t,n,o,i,l,a){for(;n<o;n++){var u=t[n];null!=u&&r(e,u,i,a,l)}}function r(t,l,a,u,s){var d=l.tag;if("string"!=typeof d)return i(l,a),null!=l.instance?(a=r(t,l.instance,a,u,s),l.dom=l.instance.dom,l.domSize=null!=l.dom?l.instance.domSize:0,c(t,a,s),l=a):(l.domSize=0,l=k),l;switch(l.state={},null!=l.attrs&&y(l.attrs,l,a),d){case"#":return l.dom=x.createTextNode(l.children),c(t,l.dom,s),l.dom;case"<":return o(t,l,s);case"[":var h=x.createDocumentFragment();return null!=l.children&&(d=l.children,n(h,d,0,d.length,a,null,u)),l.dom=h.firstChild,l.domSize=h.childNodes.length,c(t,h,s),h;default:m=l.tag;switch(l.tag){case"svg":u="http://www.w3.org/2000/svg";break;case"math":u="http://www.w3.org/1998/Math/MathML"}var v=(d=l.attrs)&&d.is,m=u?v?x.createElementNS(u,m,{is:v}):x.createElementNS(u,m):v?x.createElement(m,{is:v}):x.createElement(m);if(l.dom=m,null!=d)for(h in v=u,d)p(l,h,null,d[h],v);return c(t,m,s),null!=l.attrs&&null!=l.attrs.contenteditable?f(l):(null!=l.text&&(""!==l.text?m.textContent=l.text:l.children=[e("#",void 0,void 0,l.text,void 0,void 0)]),null!=l.children&&(t=l.children,n(m,t,0,t.length,a,null,u),t=l.attrs,"select"===l.tag&&null!=t&&("value"in t&&p(l,"value",null,t.value,void 0),"selectedIndex"in t&&p(l,"selectedIndex",null,t.selectedIndex,void 0)))),m}}function o(e,t,n){var r={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(t.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div";(r=x.createElement(r)).innerHTML=t.children,t.dom=r.firstChild,t.domSize=r.childNodes.length,t=x.createDocumentFragment();for(var o;o=r.firstChild;)t.appendChild(o);return c(e,t,n),t}function i(t,n){var r;if("function"==typeof t.tag.view){if(t.state=Object.create(t.tag),null!=(r=t.state.view).$$reentrantLock$$)return k;r.$$reentrantLock$$=!0}else{if(t.state=void 0,null!=(r=t.tag).$$reentrantLock$$)return k;r.$$reentrantLock$$=!0,t.state=null!=t.tag.prototype&&"function"==typeof t.tag.prototype.view?new t.tag(t):t.tag(t)}if(t._state=t.state,null!=t.attrs&&y(t.attrs,t,n),y(t._state,t,n),t.instance=e.normalize(t._state.view.call(t.state,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null}function l(e,t,o,i,l,f,h){if(t!==o&&(null!=t||null!=o))if(null==t)n(e,o,0,o.length,l,f,void 0);else if(null==o)d(t,0,t.length,o);else{if(t.length===o.length){for(var v=!1,p=0;p<o.length;p++)if(null!=o[p]&&null!=t[p]){v=null==o[p].key&&null==t[p].key;break}if(v){for(p=0;p<t.length;p++)t[p]!==o[p]&&(null==t[p]&&null!=o[p]?r(e,o[p],l,h,s(t,p+1,f)):null==o[p]?d(t,p,p+1,o):a(e,t[p],o[p],l,s(t,p+1,f),i,h));return}}if(i||(i=null!=t.pool&&Math.abs(t.pool.length-o.length)<=Math.abs(t.length-o.length)&&(i=o[0]&&o[0].children&&o[0].children.length||0,Math.abs((t.pool[0]&&t.pool[0].children&&t.pool[0].children.length||0)-i)<=Math.abs((t[0]&&t[0].children&&t[0].children.length||0)-i))),i){var m=t.pool;t=t.concat(t.pool)}for(var g,p=v=0,y=t.length-1,w=o.length-1;y>=v&&w>=p;){var b=t[v],x=o[p];if(b!==x||i)if(null==b)v++;else if(null==x)p++;else if(b.key===x.key){C=null!=m&&v>=t.length-m.length||null==m&&i;p++,a(e,b,x,l,s(t,++v,f),C,h),i&&b.tag===x.tag&&c(e,u(b),f)}else if((b=t[y])!==x||i)if(null==b)y--;else if(null==x)p++;else{if(b.key!==x.key)break;C=null!=m&&y>=t.length-m.length||null==m&&i,a(e,b,x,l,s(t,y+1,f),C,h),(i||p<w)&&c(e,u(b),s(t,v,f)),y--,p++}else y--,p++;else v++,p++}for(;y>=v&&w>=p;){if(b=t[y],x=o[w],b!==x||i)if(null==b)y--;else{if(null!=x)if(b.key===x.key)C=null!=m&&y>=t.length-m.length||null==m&&i,a(e,b,x,l,s(t,y+1,f),C,h),i&&b.tag===x.tag&&c(e,u(b),f),null!=b.dom&&(f=b.dom),y--;else{if(!g){g=t;var k,b=y,C={};for(k=0;k<b;k++){var S=g[k];null!=S&&null!=(S=S.key)&&(C[S]=k)}g=C}null!=x&&(b=g[x.key],null!=b?(C=t[b],a(e,C,x,l,s(t,y+1,f),i,h),c(e,u(C),f),t[b].skip=!0,null!=C.dom&&(f=C.dom)):f=r(e,x,l,void 0,f))}w--}else y--,w--;if(w<p)break}n(e,o,p,w+1,l,f,h),d(t,v,y+1,o)}}function a(t,n,s,c,d,v,b){var x=n.tag;if(x===s.tag){s.state=n.state,s._state=n._state,s.events=n.events;var k;if(k=!v){var C,S;null!=s.attrs&&"function"==typeof s.attrs.onbeforeupdate&&(C=s.attrs.onbeforeupdate.call(s.state,s,n)),"string"!=typeof s.tag&&"function"==typeof s._state.onbeforeupdate&&(S=s._state.onbeforeupdate.call(s.state,s,n)),void 0===C&&void 0===S||C||S?k=!1:(s.dom=n.dom,s.domSize=n.domSize,s.instance=n.instance,k=!0)}if(!k)if("string"==typeof x)switch(null!=s.attrs&&(v?(s.state={},y(s.attrs,s,c)):w(s.attrs,s,c)),x){case"#":n.children.toString()!==s.children.toString()&&(n.dom.nodeValue=s.children),s.dom=n.dom;break;case"<":n.children!==s.children?(u(n),o(t,s,d)):(s.dom=n.dom,s.domSize=n.domSize);break;case"[":if(l(t,n.children,s.children,v,c,d,b),n=0,c=s.children,s.dom=null,null!=c){for(v=0;v<c.length;v++){var z=c[v];null!=z&&null!=z.dom&&(null==s.dom&&(s.dom=z.dom),n+=z.domSize||1)}1!==n&&(s.domSize=n)}break;default:switch(t=b,d=s.dom=n.dom,s.tag){case"svg":t="http://www.w3.org/2000/svg";break;case"math":t="http://www.w3.org/1998/Math/MathML"}if("textarea"===s.tag&&(null==s.attrs&&(s.attrs={}),null!=s.text&&(s.attrs.value=s.text,s.text=void 0)),b=n.attrs,x=s.attrs,k=t,null!=x)for(z in x)p(s,z,b&&b[z],x[z],k);if(null!=b)for(z in b)null!=x&&z in x||("className"===z&&(z="class"),"o"!==z[0]||"n"!==z[1]||m(z)?"key"!==z&&s.dom.removeAttribute(z):g(s,z,void 0));null!=s.attrs&&null!=s.attrs.contenteditable?f(s):null!=n.text&&null!=s.text&&""!==s.text?n.text.toString()!==s.text.toString()&&(n.dom.firstChild.nodeValue=s.text):(null!=n.text&&(n.children=[e("#",void 0,void 0,n.text,void 0,n.dom.firstChild)]),null!=s.text&&(s.children=[e("#",void 0,void 0,s.text,void 0,void 0)]),l(d,n.children,s.children,v,c,null,t))}else{if(v)i(s,c);else{if(s.instance=e.normalize(s._state.view.call(s.state,s)),s.instance===s)throw Error("A view cannot return the vnode it received as argument");null!=s.attrs&&w(s.attrs,s,c),w(s._state,s,c)}null!=s.instance?(null==n.instance?r(t,s.instance,c,b,d):a(t,n.instance,s.instance,c,d,v,b),s.dom=s.instance.dom,s.domSize=s.instance.domSize):null!=n.instance?(h(n.instance,null),s.dom=void 0,s.domSize=0):(s.dom=n.dom,s.domSize=n.domSize)}}else h(n,null),r(t,s,c,b,d)}function u(e){var t=e.domSize;if(null!=t||null==e.dom){var n=x.createDocumentFragment();if(0<t){for(e=e.dom;--t;)n.appendChild(e.nextSibling);n.insertBefore(e,n.firstChild)}return n}return e.dom}function s(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function c(e,t,n){n&&n.parentNode?e.insertBefore(t,n):e.appendChild(t)}function f(e){var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag)t=t[0].children,e.dom.innerHTML!==t&&(e.dom.innerHTML=t);else if(null!=e.text||null!=t&&0!==t.length)throw Error("Child node of a contenteditable must be trusted")}function d(e,t,n,r){for(;t<n;t++){var o=e[t];null!=o&&(o.skip?o.skip=!1:h(o,r))}}function h(e,t){function n(){if(++o===r&&(v(e),e.dom)){var n=e.domSize||1;if(1<n)for(var i=e.dom;--n;){var l=i.nextSibling,a=l.parentNode;null!=a&&a.removeChild(l)}null!=(i=(n=e.dom).parentNode)&&i.removeChild(n),(n=null!=t&&null==e.domSize)&&(n=e.attrs,n=!(null!=n&&(n.oncreate||n.onupdate||n.onbeforeremove||n.onremove))),n&&"string"==typeof e.tag&&(t.pool?t.pool.push(e):t.pool=[e])}}var r=1,o=0;if(e.attrs&&"function"==typeof e.attrs.onbeforeremove){var i=e.attrs.onbeforeremove.call(e.state,e);null!=i&&"function"==typeof i.then&&(r++,i.then(n,n))}"string"!=typeof e.tag&&"function"==typeof e._state.onbeforeremove&&null!=(i=e._state.onbeforeremove.call(e.state,e))&&"function"==typeof i.then&&(r++,i.then(n,n)),n()}function v(e){if(e.attrs&&"function"==typeof e.attrs.onremove&&e.attrs.onremove.call(e.state,e),"string"!=typeof e.tag&&"function"==typeof e._state.onremove&&e._state.onremove.call(e.state,e),null!=e.instance)v(e.instance);else if(e=e.children,Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];null!=n&&v(n)}}function p(e,t,n,r,o){var i=e.dom;if("key"!==t&&"is"!==t&&(n!==r||"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===x.activeElement||"object"==typeof r)&&void 0!==r&&!m(t)){var l=t.indexOf(":");if(-1<l&&"xlink"===t.substr(0,l))i.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(l+1),r);else if("o"===t[0]&&"n"===t[1]&&"function"==typeof r)g(e,t,r);else if("style"===t)if((e=n)===r&&(i.style.cssText="",e=null),null==r)i.style.cssText="";else if("string"==typeof r)i.style.cssText=r;else{"string"==typeof e&&(i.style.cssText="");for(var a in r)i.style[a]=r[a];if(null!=e&&"string"!=typeof e)for(a in e)a in r||(i.style[a]="")}else t in i&&"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t&&void 0===o&&!(e.attrs.is||-1<e.tag.indexOf("-"))?"input"===e.tag&&"value"===t&&e.dom.value==r&&e.dom===x.activeElement||"select"===e.tag&&"value"===t&&e.dom.value==r&&e.dom===x.activeElement||"option"===e.tag&&"value"===t&&e.dom.value==r||("input"===e.tag&&"type"===t?i.setAttribute(t,r):i[t]=r):"boolean"==typeof r?r?i.setAttribute(t,""):i.removeAttribute(t):i.setAttribute("className"===t?"class":t,r)}}function m(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function g(e,t,n){var r=e.dom,o="function"!=typeof b?n:function(e){var t=n.call(r,e);return b.call(r,e),t};if(t in r)r[t]="function"==typeof n?o:null;else{var i=t.slice(2);void 0===e.events&&(e.events={}),e.events[t]!==o&&(null!=e.events[t]&&r.removeEventListener(i,e.events[t],!1),"function"==typeof n&&(e.events[t]=o,r.addEventListener(i,e.events[t],!1)))}}function y(e,t,n){"function"==typeof e.oninit&&e.oninit.call(t.state,t),"function"==typeof e.oncreate&&n.push(e.oncreate.bind(t.state,t))}function w(e,t,n){"function"==typeof e.onupdate&&n.push(e.onupdate.bind(t.state,t))}var b,x=t.document,k=x.createDocumentFragment();return{render:function(t,n){if(!t)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var r=[],o=x.activeElement;null==t.vnodes&&(t.textContent=""),Array.isArray(n)||(n=[n]),l(t,t.vnodes,e.normalizeChildren(n),!1,r,null,void 0),t.vnodes=n;for(var i=0;i<r.length;i++)r[i]();x.activeElement!==o&&o.focus()},setEventCallback:function(e){return b=e}}},f=function(e){function t(e){-1<(e=o.indexOf(e))&&o.splice(e,2)}function r(){for(var e=1;e<o.length;e+=2)o[e]()}(e=c(e)).setEventCallback(function(e){!1!==e.redraw&&r()});var o=[];return{subscribe:function(e,r){t(e),o.push(e,n(r))},unsubscribe:t,redraw:r,render:e.render}}(window);s.setCompletionCallback(f.redraw),t.mount=function(t){return function(n,r){if(null===r)t.render(n,[]),t.unsubscribe(n);else{if(null==r.view&&"function"!=typeof r)throw Error("m.mount(element, component) expects a component, not a vnode");t.subscribe(n,function(){t.render(n,e(r))}),t.redraw()}}}(f);var d=l,h=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1)),e=e.split("&");for(var t={},n={},r=0;r<e.length;r++){var o=e[r].split("="),i=decodeURIComponent(o[0]);"true"===(o=2===o.length?decodeURIComponent(o[1]):"")?o=!0:"false"===o&&(o=!1);var l=i.split(/\]\[?|\[/),a=t;-1<i.indexOf("[")&&l.pop();for(var u=0;u<l.length;u++){var i=l[u],s=""==(s=l[u+1])||!isNaN(parseInt(s,10)),c=u===l.length-1;""===i&&(i=l.slice(0,u).join(),null==n[i]&&(n[i]=0),i=n[i]++),null==a[i]&&(a[i]=c?o:s?[]:{}),a=a[i]}}return t},v=function(e){function t(t){var n=e.location[t].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===t&&"/"!==n[0]&&(n="/"+n),n}function n(e){return function(){null==o&&(o=l(function(){o=null,e()}))}}function r(e,t,n){var r=e.indexOf("?"),o=e.indexOf("#"),i=-1<r?r:-1<o?o:e.length;if(-1<r){var l,r=h(e.slice(r+1,-1<o?o:e.length));for(l in r)t[l]=r[l]}if(-1<o)for(l in t=h(e.slice(o+1)))n[l]=t[l];return e.slice(0,i)}var o,i="function"==typeof e.history.pushState,l="function"==typeof setImmediate?setImmediate:setTimeout,u={prefix:"#!",getPath:function(){switch(u.prefix.charAt(0)){case"#":return t("hash").slice(u.prefix.length);case"?":return t("search").slice(u.prefix.length)+t("hash");default:return t("pathname").slice(u.prefix.length)+t("search")+t("hash")}},setPath:function(t,n,o){var l={},s={};if(t=r(t,l,s),null!=n){for(var c in n)l[c]=n[c];t=t.replace(/:([^\/]+)/g,function(e,t){return delete l[t],n[t]})}(c=a(l))&&(t+="?"+c),(s=a(s))&&(t+="#"+s),i?(s=o?o.state:null,c=o?o.title:null,e.onpopstate(),o&&o.replace?e.history.replaceState(s,c,u.prefix+t):e.history.pushState(s,c,u.prefix+t)):e.location.href=u.prefix+t},defineRoutes:function(t,o,l){function a(){var n=u.getPath(),i={},a=r(n,i,i),s=e.history.state;if(null!=s)for(var c in s)i[c]=s[c];for(var f in t)if((s=new RegExp("^"+f.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$")).test(a))return void a.replace(s,function(){for(var e=f.match(/:[^\/]+/g)||[],r=[].slice.call(arguments,1,-2),l=0;l<e.length;l++)i[e[l].replace(/:|\./g,"")]=decodeURIComponent(r[l]);o(t[f],i,n,f)});l(n,i)}i?e.onpopstate=n(a):"#"===u.prefix.charAt(0)&&(e.onhashchange=a),a()}};return u};t.route=function(t,n){var r,o,i,l,a,u=v(t),s=function(e){return e},c=function(t,c,f){if(null==t)throw Error("Ensure the DOM element that was passed to `m.route` is not undefined");var h=function(){null!=r&&n.render(t,r(e(o,i.key,i)))},v=function(e){if(e===c)throw Error("Could not resolve default route "+c);u.setPath(c,null,{replace:!0})};u.defineRoutes(f,function(e,t,n){var u=a=function(e,c){u===a&&(o=null==c||"function"!=typeof c.view&&"function"!=typeof c?"div":c,i=t,l=n,a=null,r=(e.render||s).bind(e),h())};e.view||"function"==typeof e?u({},e):e.onmatch?d.resolve(e.onmatch(t,n)).then(function(t){u(e,t)},v):u(e,"div")},v),n.subscribe(t,h)};return c.set=function(e,t,n){null!=a&&(n={replace:!0}),a=null,u.setPath(e,t,n)},c.get=function(){return l},c.prefix=function(e){u.prefix=e},c.link=function(e){e.dom.setAttribute("href",u.prefix+e.attrs.href),e.dom.onclick=function(e){e.ctrlKey||e.metaKey||e.shiftKey||2===e.which||(e.preventDefault(),e.redraw=!1,0===(e=this.getAttribute("href")).indexOf(u.prefix)&&(e=e.slice(u.prefix.length)),c.set(e,void 0,void 0))}},c.param=function(e){return void 0!==i&&void 0!==e?i[e]:i},c}(window,f),t.withAttr=function(e,t,n){return function(r){t.call(n||this,e in r.currentTarget?r.currentTarget[e]:r.currentTarget.getAttribute(e))}};var p=c(window);t.render=p.render,t.redraw=f.redraw,t.request=s.request,t.jsonp=s.jsonp,t.parseQueryString=h,t.buildQueryString=a,t.version="1.1.1",t.vnode=e,"undefined"!=typeof module?module.exports=t:window.m=t}();