!function(){function e(){var e=window.innerWidth,n=mc.size;mc.size=mc.SIZES[0],_.some(mc.SIZES,function(n){if(!(e>n.min))return!0;mc.size=n}),mc.size!=n&&(console.log("Size changed:",window.innerWidth,window.innerHeight,"=>",mc.size),n=mc.size,m.redraw())}function n(e){return{onmatch:function(n,i){return console.log("view page",n,i),mc.local||(ga("set","page",m.route.get()),ga("send","pageview",m.route.get())),i18n.setLanguage(n.language),mc.currentPage=i.split("/")[2],{view:function(n){return!i18n.language||i18n.loadingLanguage?(mc.baseProcessed=!1,m(mc.Spinner)):mc.baseLoaded?(mc.baseProcessed||t(),m("div#main",[m(mc.Header,n.attrs),m(mc.Menu,n.attrs),m(e,n.attrs),m(mc.Footer,n.attrs)])):(mc.baseProcessed=!1,m(mc.Spinner))}}}}}function t(){if(DEBUG)var e=Date.now();var n=0;_.each(["unites","preparations"],function(e){_.each(mc[e],function(t){t.nomTraduit=i18n("_"+e+"."+t.nom),t._key=n++})}),_.each(mc.tagsIngredient,function(e){e.nomTraduit=i18n("_tagsIngredient."+e.nom),e._key=n++,e.ingredients=[]}),mc.tagsIngredient=_.sortBy(mc.tagsIngredient,"nomTraduit"),_.each(mc.ingredients,function(e){e.nomTraduit=i18n("_ingredients."+e.nom),e._key=n++,e.recettes=[],e.tags=_.map(e.tags,function(n){if("string"==typeof n){var t=_.find(mc.tagsIngredient,{nom:n});assert(t,"je connais pas ce tag: "+n),n=t}return n.ingredients.push(e),n})}),mc.ingredients=_.sortBy(mc.ingredients,"nomTraduit"),_.each(mc.tagsRecette,function(e){e.nomTraduit=i18n("_tagsIngredient."+e.nom),e._key=n++,e.recettes=[]}),mc.tagsRecette=_.sortBy(mc.tagsRecette,"nomTraduit"),_.each(mc.recettes,function(e){e.nomTraduit=i18n("_recettes."+e.nom),e._key=n++,_.each(e.ingredients,function(n){var t=_.find(mc.ingredients,{nom:n.nom});if(assert(t,"je connais pas cet ingredient: "+n.nom),n.ingredient=t,t.recettes.push(e),"string"==typeof n.unite){var i=_.find(mc.unites,{nom:n.unite});assert(i,"je connais pas cet unite: "+n.unite),n.unite=i}}),e.tags=_.map(e.tags,function(n){if("string"==typeof n){var t=_.find(mc.tagsRecette,{nom:n});assert(t,"je connais pas ce tag: "+n),n=t}return n.recettes.push(e),n})}),mc.recettes=_.sortBy(mc.recettes,"nomTraduit"),mc.baseProcessed=!0,DEBUG&&console.log("PROCESS BASE:",Date.now()-e,"ms"),DEBUG&&i18n.logMissingKeys()}mc.size=null,mc.SIZES=[{min:0,pure:null,rollover:!1},{min:568,pure:"sm",rollover:!1},{min:768,pure:"md",rollover:!0},{min:1024,pure:"lg",rollover:!0},{min:1280,pure:"xl",rollover:!0}],mc.baseLoaded=!1,mc.baseProcessed=!1,mc.currentPage=null,mc.recettes=null,mc.tagsRecette=null,mc.ingredients=null,mc.tagsIngredient=null,mc.preparations=null,mc.origines=null,mc.unites=null,mc.recettes=null,function(){e(),window.addEventListener("resize",e),m.route(document.body,"/fr/accueil",{"/:language/accueil":n(mc.Accueil),"/:language/ingredients":n(mc.Ingredients),"/:language/ingredients/:nom":n(mc.Ingredient),"/:language/recettes":n(mc.Recettes),"/:language/recettes/:nom":n(mc.Recette)}),m.request({method:"GET",url:"data/base.json"}).then(function(e){for(var n in e)mc[n]=e[n];mc.baseLoaded=!0},function(e){console.log(e)})}(),mc.makeAssetPath=function(e,n){var t=e.lastIndexOf(".");return e.slice(0,t)+"."+n+"."+e.slice(t+1)}}();